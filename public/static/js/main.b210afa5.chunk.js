(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){e.exports=a(268)},268:function(e,t,a){"use strict";a.r(t);var n=a(17),r=a.n(n),o=a(19),i=a(28),l=a(30),c=a(29),s=a(31),m=a(24),u=a(0),p=a.n(u),h=a(113),g=a.n(h),d=a(114),f=a.n(d),E=a(22),b=a.n(E),w=a(32),v=a.n(w),O=a(25),y=a.n(O),j=a(76),S=a.n(j),C=a(47),k=a.n(C),M=a(33),A=a.n(M),N=a(63),P=a.n(N),R=a(39),L=a(23),x=a(115),I=a.n(x),T=a(116),W=a.n(T),U=a(112),B=a.n(U),F=a(117),z=a.n(F),q=a(77),D=a.n(q),J=a(78),H=a.n(J),G=a(118),$=a.n(G),K=a(18),Q=a(55),V=a.n(Q),X=[{id:1,name:"home",link:"/home"},{id:2,name:"register",link:"/register"}],Y=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null,mobileMoreAnchorEl:null,menuAnchorEl:null},a.logout=function(){a.props.rootStore.loginStore.logout()},a.handleProfileMenuOpen=function(e){a.setState({anchorEl:e.currentTarget})},a.closeAllMenues=function(){a.setState({anchorEl:null}),a.handleMobileMenuClose()},a.handleMobileMenuOpen=function(e){a.setState({mobileMoreAnchorEl:e.currentTarget})},a.handleMobileMenuClose=function(){a.setState({mobileMoreAnchorEl:null})},a.handleMenuOpen=function(e){a.setState({menuAnchorEl:e.currentTarget})},a.handleMenuClose=function(){a.setState({menuAnchorEl:null})},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.anchorEl,a=e.mobileMoreAnchorEl,n=e.menuAnchorEl,r=this.props.classes,o=Boolean(t),i=Boolean(a),l=Boolean(n),c=p.a.createElement(P.a,{anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:o,onClose:this.closeAllMenues},p.a.createElement(A.a,{onClick:this.closeAllMenues},"Profile"),p.a.createElement(A.a,{onClick:this.closeAllMenues},"My account"),p.a.createElement(A.a,{onClick:this.logout},"Logout")),s=p.a.createElement(P.a,{anchorEl:n,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:l,onClose:this.handleMenuClose},X.map(function(e){return p.a.createElement(A.a,{component:V.a,key:e.id.toString(),to:e.link},e.name)})),m=p.a.createElement(P.a,{anchorEl:a,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:i,onClose:this.closeAllMenues},p.a.createElement(A.a,{onClick:this.handleMobileMenuClose},p.a.createElement(b.a,{color:"inherit"},p.a.createElement(k.a,{badgeContent:4,color:"secondary"},p.a.createElement(D.a,null))),p.a.createElement("p",null,"Messages")),p.a.createElement(A.a,{onClick:this.handleMobileMenuClose},p.a.createElement(b.a,{color:"inherit"},p.a.createElement(k.a,{badgeContent:11,color:"secondary"},p.a.createElement(H.a,null))),p.a.createElement("p",null,"Notifications")),p.a.createElement(A.a,{onClick:this.handleProfileMenuOpen},p.a.createElement(b.a,{color:"inherit"},p.a.createElement(B.a,null)),p.a.createElement("p",null,"Profile")));return p.a.createElement("div",{className:r.root},p.a.createElement(g.a,{position:"static"},p.a.createElement(f.a,null,p.a.createElement(b.a,{onClick:this.handleMenuOpen,className:r.menuButton,color:"inherit","aria-label":"Open drawer"},p.a.createElement(I.a,null)),p.a.createElement(y.a,{className:r.title,variant:"h6",color:"inherit",noWrap:!0},"Nano-Twitter"),p.a.createElement("div",{className:r.search},p.a.createElement("div",{className:r.searchIcon},p.a.createElement(W.a,null)),p.a.createElement(S.a,{placeholder:"Search\u2026",classes:{root:r.inputRoot,input:r.inputInput}})),p.a.createElement("div",{className:r.grow}),p.a.createElement("div",{className:r.sectionDesktop},p.a.createElement(b.a,{color:"inherit"},p.a.createElement(z.a,null)),p.a.createElement(b.a,{color:"inherit"},p.a.createElement(k.a,{badgeContent:4,color:"secondary"},p.a.createElement(D.a,null))),p.a.createElement(b.a,{color:"inherit"},p.a.createElement(k.a,{badgeContent:17,color:"secondary"},p.a.createElement(H.a,null))),p.a.createElement(b.a,{"aria-owns":o?"material-appbar":void 0,"aria-haspopup":"true",onClick:this.handleProfileMenuOpen,color:"inherit"},p.a.createElement(v.a,{className:this.props.classes.avatar,alt:"Remy Sharp",src:"https://material-ui.com/static/images/avatar/1.jpg"}))),p.a.createElement("div",{className:r.sectionMobile},p.a.createElement(b.a,{"aria-haspopup":"true",onClick:this.handleMobileMenuOpen,color:"inherit"},p.a.createElement($.a,null))))),s,c,m)}}]),t}(p.a.Component),Z=Object(L.withStyles)(function(e){return Object(L.createStyles)({root:{width:"100%"},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},title:Object(m.a)({display:"none"},e.breakpoints.up("sm"),{display:"block"}),search:Object(m.a)({position:"relative",borderRadius:e.shape.borderRadius,backgroundColor:Object(R.fade)(e.palette.common.white,.15),"&:hover":{backgroundColor:Object(R.fade)(e.palette.common.white,.25)},marginRight:2*e.spacing.unit,marginLeft:0,width:"100%"},e.breakpoints.up("sm"),{marginLeft:3*e.spacing.unit,width:"auto"}),searchIcon:{width:9*e.spacing.unit,height:"100%",position:"absolute",pointerEvents:"none",display:"flex",alignItems:"center",justifyContent:"center"},inputRoot:{color:"inherit",width:"100%"},inputInput:Object(m.a)({paddingTop:e.spacing.unit,paddingRight:e.spacing.unit,paddingBottom:e.spacing.unit,paddingLeft:10*e.spacing.unit,transition:e.transitions.create("width"),width:"100%"},e.breakpoints.up("md"),{width:200}),sectionDesktop:Object(m.a)({display:"none"},e.breakpoints.up("md"),{display:"flex"}),sectionMobile:Object(m.a)({display:"flex"},e.breakpoints.up("md"),{display:"none"}),avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main}})})(Object(K.b)("rootStore")(Object(K.c)(Y))),_=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ee(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;null!=a&&(a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}var te=a(6),ae=a(108),ne=function e(){var t=this;Object(o.a)(this,e),this.changePassword=function(e){t.password=e},this.changeEmail=function(e){t.email=e},this.login=function(){var e={password:t.password,email:t.email};return fetch("/api/users/signin",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),body:ae.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.message?(sessionStorage.setItem("isLoggedIn",!0),alert("Login success!"),window.location="/home"):alert(JSON.stringify(e.error))}).catch(function(e){console.log(e)})},this.logout=function(){sessionStorage.removeItem("isLoggedIn"),t.isLoggedIn=!1,window.location="/login"},this.password="",this.email="",this.isLoggedIn=sessionStorage.getItem("isLoggedIn")};Object(te.g)(ne,{email:te.l,password:te.l,isLoggedIn:te.l,authenticate:te.d,changePassword:te.d,changeEmail:te.d});var re=new ne,oe=a(108),ie=function e(){var t=this;Object(o.a)(this,e),this.changeUsername=function(e){t.username=e},this.changePassword=function(e){t.password=e},this.changeEmail=function(e){t.email=e},this.register=function(){var e={name:t.username,password:t.password,email:t.email};return fetch("/api/users/signup",{method:"POST",headers:new Headers({Accept:"application/json","Content-Type":"application/x-www-form-urlencoded"}),body:oe.stringify(e)}).then(function(e){return e.json()}).then(function(e){e.message?(alert(e.message+" Please log in."),window.location="/login"):alert(JSON.stringify(e.error))}).catch(function(e){console.log(e)})},this.username="",this.password="",this.email=""};Object(te.g)(ie,{username:te.l,email:te.l,password:te.l,changeUsername:te.d,changePassword:te.d,changeEmail:te.d,register:te.d});var le=new ie,ce=new function e(){Object(o.a)(this,e),this.registerStore=le,this.loginStore=re};var se=function(){return p.a.createElement("h1",null,"Home")},me=a(60),ue=a.n(me),pe=a(56),he=a.n(pe),ge=a(34),de=a.n(ge),fe=a(58),Ee=a.n(fe),be=a(59),we=a.n(be),ve=a(36),Oe=a.n(ve),ye=a(35),je=a.n(ye),Se=(a(57),a(40)),Ce=a.n(Se),ke=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).changeUsername=function(e){a.props.rootStore.loginStore.changeUsername(e.target.value)},a.changePassword=function(e){a.props.rootStore.loginStore.changePassword(e.target.value)},a.changeEmail=function(e){a.props.rootStore.loginStore.changeEmail(e.target.value)},a.submit=function(e){a.props.rootStore.loginStore.login()},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return p.a.createElement("main",{className:this.props.classes.main},p.a.createElement(he.a,null),p.a.createElement(Ce.a,{className:this.props.classes.paper},p.a.createElement(v.a,{className:this.props.classes.avatar,alt:"Remy Sharp",src:"https://material-ui.com/static/images/avatar/1.jpg"}),p.a.createElement(y.a,{component:"h1",variant:"h5"},"Login"),p.a.createElement("form",{className:this.props.classes.form},p.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},p.a.createElement(je.a,{htmlFor:"email"},"Email Address"),p.a.createElement(Oe.a,{onChange:this.changeEmail,id:"email",name:"email",type:"email",autoComplete:"email",autoFocus:!0})),p.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},p.a.createElement(je.a,{htmlFor:"password"},"Password"),p.a.createElement(Oe.a,{onChange:this.changePassword,id:"password",name:"password",type:"password",autoComplete:"current-password"})),p.a.createElement(Ee.a,{control:p.a.createElement(we.a,{value:"remember",color:"primary"}),label:"Remember me"}),p.a.createElement(y.a,null,p.a.createElement(V.a,{href:"/register",className:"register"},"Don't have an account? Register?")),p.a.createElement(ue.a,{fullWidth:!0,variant:"contained",color:"primary",className:this.props.classes.submit,onClick:this.submit},"Log in"))))}}]),t}(u.Component),Me=Object(L.withStyles)(function(e){return Object(L.createStyles)({main:Object(m.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}})})(Object(K.b)("rootStore")(Object(K.c)(ke))),Ae=function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(a=Object(l.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).changeUsername=function(e){a.props.rootStore.registerStore.changeUsername(e.target.value)},a.changePassword=function(e){a.props.rootStore.registerStore.changePassword(e.target.value)},a.changeEmail=function(e){a.props.rootStore.registerStore.changeEmail(e.target.value)},a.register=function(){a.props.rootStore.registerStore.register()},a}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return p.a.createElement("main",{className:this.props.classes.main},p.a.createElement(he.a,null),p.a.createElement(Ce.a,{className:this.props.classes.paper},p.a.createElement(v.a,{className:this.props.classes.avatar,alt:"Remy Sharp",src:"https://material-ui.com/static/images/avatar/1.jpg"}),p.a.createElement(y.a,{component:"h1",variant:"h5"},"Register"),p.a.createElement("form",{className:this.props.classes.form},p.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},p.a.createElement(je.a,{htmlFor:"username"},"Username"),p.a.createElement(Oe.a,{onChange:this.changeUsername,id:"username",name:"username",type:"text",autoComplete:"current-username",autoFocus:!0})),p.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},p.a.createElement(je.a,{htmlFor:"email"},"Email Address"),p.a.createElement(Oe.a,{onChange:this.changeEmail,id:"email",name:"email",type:"email",autoComplete:"email"})),p.a.createElement(de.a,{margin:"normal",required:!0,fullWidth:!0},p.a.createElement(je.a,{htmlFor:"password"},"Password"),p.a.createElement(Oe.a,{onChange:this.changePassword,id:"password",name:"password",type:"password",autoComplete:"current-password"})),p.a.createElement(Ee.a,{control:p.a.createElement(we.a,{value:"remember",color:"primary"}),label:"Remember me"}),p.a.createElement(ue.a,{fullWidth:!0,variant:"contained",color:"primary",onClick:this.register},"Register"))))}}]),t}(u.Component),Ne=Object(L.withStyles)(function(e){return Object(L.createStyles)({main:Object(m.a)({width:"auto",display:"block",marginLeft:3*e.spacing.unit,marginRight:3*e.spacing.unit},e.breakpoints.up(400+3*e.spacing.unit*2),{width:400,marginLeft:"auto",marginRight:"auto"}),paper:{marginTop:8*e.spacing.unit,display:"flex",flexDirection:"column",alignItems:"center",padding:"".concat(2*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px ").concat(3*e.spacing.unit,"px")},avatar:{margin:e.spacing.unit,backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing.unit},submit:{marginTop:3*e.spacing.unit}})})(Object(K.b)("rootStore")(Object(K.c)(Ae))),Pe=a(119),Re=a(272),Le=a(270),xe=function(e){function t(){return Object(o.a)(this,t),Object(l.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.component,n=Object(Pe.a)(t,["component"]),r=this.props.rootStore.loginStore.isLoggedIn;return p.a.createElement(Re.a,Object.assign({},n,{render:function(t){return console.log(r),"true"===r?p.a.createElement(a,e.props):p.a.createElement(Le.a,{to:"/login"})}}))}}]),t}(u.Component),Ie=Object(K.b)("rootStore")(Object(K.c)(xe)),Te=a(269),We=a(271);r.a.render(p.a.createElement(K.a,{rootStore:ce},p.a.createElement(Z,null)),document.getElementById("navbar")),r.a.render(p.a.createElement(K.a,{rootStore:ce},p.a.createElement(Te.a,null,p.a.createElement("div",null,p.a.createElement(We.a,null,p.a.createElement(Re.a,{exact:!0,path:"/",component:Me}),p.a.createElement(Re.a,{path:"/login",component:Me}),p.a.createElement(Re.a,{path:"/register",component:Ne}),"\xed",p.a.createElement(Ie,{path:"/home",component:se}))))),document.getElementById("body")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");_?(function(e,t){fetch(e).then(function(a){var n=a.headers.get("content-type");404===a.status||null!=n&&-1===n.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ee(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ee(t,e)})}}()}},[[121,1,2]]]);
//# sourceMappingURL=main.b210afa5.chunk.js.map